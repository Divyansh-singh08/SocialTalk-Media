<html>
    <head>
<title>
    <%= title %>
</title>
    </head>
    <body>
        <h1>codeTalk <%=title%> </h1>
        <!-- <form>
            <input type="text">
        </form> -->

        <section id="feed-post">
            <h4>POST</h4>

            <% if(locals.user){%>
            <form action="/posts/createPost" id="new-post-form" method="post">
                <textarea name="content" id="" cols="30" rows="3" required></textarea>
                <input type="submit" value="POST">
            </form>
            <%}%>


            <div id="posts-list-container">
                <ul>
                <!-- posts is the part of the home_controller.js in populating function  -->
                    <% for(pt of posts){ %>
                        
                        <li>
                          <p>
                            <!-- if user is singIn and the who created the post is equal to the who created the post -->
                            <% if(locals.user && locals.user.id == pt.user.id) {%>
            
                                <small>
                                    <a href="/posts/destroyPost/<%= pt.id %>">DEL</a>
                                </small>

                            <% } %>

                            <%=pt.content%>
                            <br>
                            <small>
                                <%=pt.user.name %>
                            </small>
                          </p>

                          <!-- i will display comment here and only those people who signIn   -->
                          <div class="post-comments">
                                <% if(locals.user){ %>
                                    <form action="/comments/createComment" method="post">
                                        <input type="text" name="content" placeholder="Add Comment...." required>
                                        <input type="hidden" name="post" value="<%=pt._id %>">
                                        <input type="submit" value="Add comment">
                                    </form>
                                    
                                <% } %>
                                <div class="postComments-list">
                                    <ul id="post-comments-<%= pt._id %>">
                                        <% for(comment of pt.comments){%>
                                            
                                            <p>
                                                <%=comment.content%>
                                                <br>
                                                <small>
                                                    <%= comment.user.name%>
                                                </small>
                                            </p>
                                            
                                        <%}%>
                                    </ul>

                                </div>
                          </div>

                        </li>
                    <%}%>
                </ul>
            </div>


        </section>
    </body>
</html>